{% extends "./layout.html" %}

{% load staticfiles %}
{% load utils %}
{% load render_table from django_tables2 %}

{% block content %}
  <section>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12">
          <h2>Mijn team <small>{{ table.title }}</small></h2>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-12">
          <h3>Inplannen</h3>

          <div id="dutyForm">
            <form method="post" action="{% url 'timetable-teamleader-duty-add' %}">
              {% csrf_token %}

              {% if tables %}
                <div>
                  <label>Rooster</label><br/>
                  <select name="timetable" required>
                    {% for tab in tables %}
                      <option value="{{ tab.pk }}" {% if tab.pk == table.pk %}selected="selected"{% endif %}>{{ tab.title }}</option>
                    {% endfor %}
                  </select>
                </div>
                <br/>
              {% else %}
                <input type="hidden" name="timetable" value="{{ table.id }}"/>
              {% endif %}

              <div>
                <label>Event</label><br/>
                <select name="event" required>
                  {% for event in events %}
                    <option value="{{ event.pk }}" {% if event.pk == selected_event %}selected="selected"{% endif %}>{{ event }}</option>
                  {% endfor %}
                </select>
              </div>
              <br/>

              <div>
                <label>Verantwoordelijke</label><br/>
                <select name="responsible" required>
                  {% for member in members %}
                    <option value="{{ member.profile.pk }}" {% if member.profile.pk == selected_member %}selected="selected"{% endif %}>{{ member.profile.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <br/>

              <div>
                <label>Commentaar</label>
                <textarea name="comments">{% if duty %}{{ duty.comments }}{% endif %}</textarea>
              </div>

              <div>
                <a href="{% url 'timetable-teamleader-page' table.id %}" class="btn btn-default black">Annuleren</a>
                <button type="submit" class="btn btn-default cyan modal-submit-button">
                  Inplannen
                </button>
              </div>
            </form>
          </div>

        </div>
      </div>
    </div>
  </section>
{% endblock %}

{% block scripts %}
  <script>
    window.timetableTeamleaderDuty();
  </script>
{% endblock %}
